var app=angular.module("MyApp.timercontrol",[]);app.controller("timercontrol",["$scope","$ionicPopup","$timeout","$rootScope",function(e,t,n,r){e.rangeMin={min:1},e.rangeSec={sec:30},e.startStopFlag=!0,e.timerClear=!0,e.stringMin=String(e.rangeMin),e.stringSec=String(e.rangeSec),e.infoFlag=4,e.$watch("minutes",function(){e.stringMin=String(e.minutes),e.stringMin.length<2&&(e.stringMin="0"+String(e.minutes))}),e.$watch("seconds",function(){e.stringSec=String(e.seconds),e.stringSec.length<2&&(e.stringSec="0"+String(e.seconds))}),e.showInfo=function(){"heroku"==r.stateW&&winston.log("info",e.$storage.userId+", viewed timer info at "+new Date);var n=t.show({title:"Timer",scope:e,templateUrl:"pop/pop-maininfo.html",buttons:[{text:"<b>Done</b>",type:"button-dark",onTap:function(e){}}]});n.then(function(t){"heroku"==r.stateW&&winston.log("info",e.$storage.userId+", closed timer info at "+new Date)})},e.timerPreset=function(t,r){console.log(t,r);var i=function(t,n){e.rangeMin.min=n,e.rangeSec.sec=t,e.$broadcast("timer-reset"),e.minutes=n,e.seconds=t};i(t,r),n(function(){i(t,r)},5),e.startStopFlag=!0},e.upOneMin=function(){e.startStopFlag&&e.rangeMin.min<30&&(e.rangeMin.min=parseFloat(e.rangeMin.min)+1,e.$broadcast("timer-reset"),n(function(){e.$broadcast("timer-reset")},5))},e.downOneMin=function(){e.startStopFlag&&(e.rangeMin.min>0&&(e.rangeMin.min=parseFloat(e.rangeMin.min)-1,e.$broadcast("timer-reset")),n(function(){e.$broadcast("timer-reset")},5))},e.upOneSec=function(){e.startStopFlag&&(e.rangeSec.sec<59&&(e.rangeSec.sec=parseFloat(e.rangeSec.sec)+1,e.$broadcast("timer-reset")),n(function(){e.$broadcast("timer-reset")},5))},e.downOneSec=function(){e.rangeSec.sec&&(e.rangeSec>0&&(e.rangeSec.sec=parseFloat(e.rangeSec.sec)-1,e.$broadcast("timer-reset")),n(function(){e.$broadcast("timer-reset")},5))},e.onRelease=function(){if(console.log("working"),e.startStopFlag){console.log("working,",e.rangeSec.sec,e.rangeMin.min);var t=Number(e.rangeMin.min),n=Number(e.rangeSec.sec);e.timerPreset(n,t)}},e.seconds1=function(){return Number(60*e.rangeMin.min)+Number(e.rangeSec.sec)},e.startStop=function(){e.startStopFlag?e.timerClear?(e.$broadcast("timer-start"),e.timerClear=!1):e.$broadcast("timer-resume"):e.$broadcast("timer-stop"),e.startStopFlag=!e.startStopFlag},e.reset=function(){0==e.timerClear&&(e.$broadcast("timer-reset"),e.minutes=0,e.seconds=0,e.startStopFlag=!0)},e.finished=function(){e.startStopFlag=!0;var n=t.alert({title:"Times up!",template:""});n.then(function(e){})},e.timerToggle=function(){e.$broadcast("timer-stop")}}]);