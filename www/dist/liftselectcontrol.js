var app=angular.module("MyApp.liftselectcontrol",["MyApp.services","ngStorage","ngCordova"]);app.controller("liftselectcontrol",["$scope","$ionicScrollDelegate","$ionicPlatform","$localStorage","$timeout","localStore","$ionicPopup","$rootScope",function(t,e,n,o,i,a,r,s){t.liftData=o.liftData,t.matchedLifts=[],t.attr1Pressed=".",t.attr2Pressed=".",t.attr3Pressed=".",t.searchTextC="",t.selectLift={name:"Select Lift"},t.newLiftName={name:""},t.custom=!1,t.customLifts=[],t.removeFlagB=!1,t.liftForSettingsChange="",t.liftObjectForSettingsChange={},t.liftSelectorState="All Lifts",t.closeKeyboard=function(){document.activeElement.blur(),document.activeElement.blur()},t.showInfo=function(){if("heroku"==s.stateW){var e=new Date;winston.log("info",t.$storage.userId+", viewed liftselect info")}t.infoFlag=5;var n=r.show({title:"Lift select",scope:t,templateUrl:"pop/pop-maininfo.html",buttons:[{text:"<b>Done</b>",type:"button-dark",onTap:function(t){}}]});n.then(function(n){if("heroku"==s.stateW){var o=new Date-e;winston.log("info",t.$storage.userId+", closed liftselect after"+o)}})},t.liftDataRm=function(){return newList},t.changeSort=function(e,n){if(4!=e){if(console.log("reverted",t.liftObjectForSettingsChange["attr"+String(e)],n),t.liftObjectForSettingsChange["attr"+String(e)]==n)return t.liftObjectForSettingsChange["attr"+String(e)]=".",void console.log("revebrted","1"==t.liftObjectForSettingsChange.attr1);t.liftObjectForSettingsChange["attr"+String(e)]=n}else t.liftObjectForSettingsChange.weight=n},t.editSettings=function(e){t.liftForSettingsChange=e,t.liftObjectForSettingsChange=a.getLiftByName(e);var n=r.show({templateUrl:"pop/pop-liftset.html",title:"Settings for lift",scope:t,buttons:[{text:"<b >Done</b>",type:"button-dark",onTap:function(t){}}]});n.then(function(t){})},t.listSort=function(n,o){e.scrollTop(),1==n?t.attr1Pressed=t.attr1Pressed==o?".":o:2==n?t.attr2Pressed=t.attr2Pressed==o?".":o:3==n&&(t.attr3Pressed=t.attr3Pressed==o?".":o),e.scrollTop()},t.filterCustom=function(n){t.reset(),t.liftSelectorState=t.custom?"All Lifts":"User Entered Lifts",n&&!t.custom?t.custom=!t.custom:n||(t.custom=!t.custom),i(function(){e.$getByHandle("liftBox").scrollTop()},100)},t.reset=function(){t.attr1Pressed=".",t.attr2Pressed=".",t.attr3Pressed=".",t.selected=".",t.removeFlagB=!1,t.searchTextC="",t.searchText=""},t.watch=function(e){t.searchTextC=e},t.$on("reset-liftselect",function(){t.reset()}),t.isSelected=function(e){return t.selected===e},t.removeLiftEntry=function(e){t.removeFlag&&a.removeLiftEntry(e)},t.setLift=function(e,n){return t.removeFlagB?void a.removeLiftEntry(e.name):(t.selected=e,void t.closeModal(e,0,1))},t.backFrom=function(){t.closeModal("no change",0,1)},t.swipeLeftLift=function(){t.closeModal("",0,1)},t.$on("edit-settings",function(e,n){i(function(){t.editSettings(n.name)},500)}),t.goToUrl=function(t,e){var n=t.replace(/ /g,"+"),o="https://www.google.com/search?q="+n,i=window.open(o,"_blank","location=no");i.addEventListener("loaderror",function(t){alert("error: "+t.message),i.close()})},t.addLiftPopup=function(){var e=r.show({template:'<input type="text" ng-model="newLiftName.name" maxlength="30">',title:"Enter new lift name",subTitle:"Press 'View Added' Button to filter to your added lifts",scope:t,buttons:[{text:"Cancel"},{text:"<b>Add</b>",type:"button-dark",onTap:function(e){t.addLiftFlag=!t.addLiftFlag,""==t.newLiftName.name?e.preventDefault():(a.addLiftToList(t.newLiftName.name),t.liftData=o.liftData,t.filterCustom(!0),s.$broadcast("edit-settings",{name:angular.copy(t.newLiftName.name)}),t.newLiftName.name="")}}]});e.then(function(e){t.addLiftFlag=!t.addLiftFlag})}}]);