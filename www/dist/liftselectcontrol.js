var app=angular.module("MyApp.liftselectcontrol",["MyApp.services","ngStorage","ngCordova"]);app.controller("liftselectcontrol",["$scope","$ionicScrollDelegate","$ionicPlatform","$localStorage","$timeout","localStore","$ionicPopup","$rootScope","$ionicModal",function(t,e,o,n,a,i,l,s,r){function c(e){t.keyBoardUp=!1}function d(e){t.keyboardUp=!0}t.liftData=n.mainObj.liftData,t.matchedLifts=[],t.attr1Pressed=".",t.attr2Pressed=".",t.attr3Pressed=".",t.searchTextC="",t.selectLift={name:"Select Lift"},t.newLiftName={name:""},t.custom=!1,t.customLifts=[],t.preventFlag=!0,t.removeFlagB=!1,t.liftForSettingsChange="",t.liftObjectForSettingsChange={},t.liftSelectorState="All Lifts",t.keyBoardUp=!1,window.addEventListener("native.hidekeyboard",c),window.addEventListener("native.showkeyboard",d),t.closeKeyboard=function(){document.activeElement.blur(),document.activeElement.blur()},t.$on("cloud-load",function(){t.liftData=n.mainObj.liftData}),t.$on("open-lift-settings",function(e,o){console.log(o),t.editSettings(o.name)}),t.showInfo=function(){"heroku"==s.stateW,t.infoFlag=5;var e=l.show({title:"Lift select",scope:t,templateUrl:"pop/pop-maininfo.html",buttons:[{text:"<b>Done</b>",type:"button-dark",onTap:function(t){}}]});e.then(function(t){if("heroku"==s.stateW){new Date-datenew}})},t.liftDataRm=function(){return newList},t.changeSort=function(e,o){if(4!=e){if(console.log("reverted",t.liftObjectForSettingsChange["attr"+String(e)],o),t.liftObjectForSettingsChange["attr"+String(e)]==o)return t.liftObjectForSettingsChange["attr"+String(e)]=".",void console.log("revebrted","1"==t.liftObjectForSettingsChange.attr1);t.liftObjectForSettingsChange["attr"+String(e)]=o}else t.liftObjectForSettingsChange.weight=o},t.pop=!0,r.fromTemplateUrl("modals/nav-liftset.html",{id:"1",scope:t,backdropClickToClose:!1,animation:"slide-in-up"}).then(function(e){t.modal=e}),t.editSettings=function(e){t.liftForSettingsChange=e,t.liftObjectForSettingsChange=i.getLiftByName(e);var o=l.show({templateUrl:"pop/pop-liftset.html",title:"Settings for lift",scope:t,buttons:[{text:"<b >Done</b>",type:"button-dark",onTap:function(e){t.preventFlag=!0}}]});o.then(function(t){s.$broadcast("lift-settings-change",{name:e})})},t.hideModal=function(){console.log("isshown",t.modal._isShown),t.modal.hide(),a(function(){t.modal.hide(),console.log("isshown",t.modal._isShown),t.modal._isShown&&t.hideModal()},305)},t.listSort=function(o,n){e.scrollTop(),1==o?t.attr1Pressed=t.attr1Pressed==n?".":n:2==o?t.attr2Pressed=t.attr2Pressed==n?".":n:3==o&&(t.attr3Pressed=t.attr3Pressed==n?".":n),e.scrollTop()},t.filterCustom=function(o){t.reset(),t.liftSelectorState=t.custom?"All Lifts":"User Entered Lifts",o&&!t.custom?t.custom=!t.custom:o||(t.custom=!t.custom),a(function(){e.$getByHandle("liftBox").scrollTop()},100)},t.reset=function(){t.attr1Pressed=".",t.attr2Pressed=".",t.attr3Pressed=".",t.selected=".",t.removeFlagB=!1,t.searchTextC="",t.searchText=""},t.resetClose=function(){t.attr1Pressed=".",t.attr2Pressed=".",t.attr3Pressed=".",t.selected=".",t.custom=!1,t.removeFlagB=!1,t.searchTextC="",t.searchText=""},t.watch=function(e){t.searchTextC=e},t.$on("reset-liftselect",function(){t.resetClose()}),t.isSelected=function(e){return t.selected===e},t.removeLiftEntry=function(e){t.removeFlag&&i.removeLiftEntry(e)},t.setLift=function(e,o){return t.removeFlagB?void i.removeLiftEntry(e.name):(t.selected=e,void t.closeModal(e,0,1))},t.backFrom=function(){t.closeModal("no change",0,1)},t.swipeLeftLift=function(){t.closeModal("",0,1)},t.$on("edit-settings",function(e,o){console.log("asdf4"),console.log("asdf5"),t.countPop++,console.log("thencount",t.countPop),t.editSettings(o.name),t.newLiftName.name=""}),t.closeKeyboardLiftSelect=function(){s.closeKeyboard(),t.cancelFlag=!1,t.addLiftPopup.close()},t.goToUrl=function(t,e){var o=t.replace(/ /g,"+"),n="https://www.google.com/search?q="+o,a=window.open(n,"_blank","location=no");a.addEventListener("loaderror",function(t){alert("error: "+t.message),a.close()})},t.hideFlag=!0,t.hideFlag2=!0,t.cancelFlag=!1,t.addLiftPopup=function(){var e=l.show({template:'<form><div><input ng-enter="closeKeyboard()" ng-readonly="!hideFlag" type="text" ng-model="newLiftName.name" maxlength="30"/></div></form>',title:"Enter new lift name",subTitle:"Press 'View Added' Button to filter to your added lifts",scope:t,buttons:[{text:"Cancel",onTap:function(o){t.cancelFlag=!0,t.hideFlag=!1,o.preventDefault(),a(function(){e.close()},300),a(function(){t.hideFlag=!0},500)}},{text:"<b>Add</b>",type:"button-dark",onTap:function(e){t.$storage.mainObj.addCount++,console.log("counter",t.$storage.mainObj.addCount),t.cancelFlag=!1}}]});e.then(function(o){t.countPop=0,t.cancelFlag||(t.addLiftFlag=!t.addLiftFlag,t.addLiftFlag=!t.addLiftFlag,""==t.newLiftName.name||(i.addLiftToList(t.newLiftName.name),t.liftData=n.mainObj.liftData,t.filterCustom(!0),t.hideFlag=!1,t.loading=!0,a(function(){e.close(),console.log("asdf3"),t.editSettings(angular.copy(t.newLiftName.name)),t.newLiftName.name="",s.closeKeyboard()},300),a(function(){t.loading=!1,t.hideFlag=!0},500)))})}}]);